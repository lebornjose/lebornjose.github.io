---
date: 2014-11-20 14:46:00
title: IIS 6.0 搭建隔离用户的ftp站点
layout: post
tags:
   - ftp
   - IIS
categories:
   - lebornjose
---


+ 今天写这一篇博客来缅怀一下自己的失败历程，这一次搭配ftp站点应该是第n次尝试搭配ftp站点了(n>3)，这一次是因为业务的需求，系统需要上传大文件(文件不大一半系统可以自己处理)

>这里说一下几次失败的原因吧！失败结构，ftp客户端无法进行链接

<p style="color:red">总结原因：应该是我环境配置错误，系统是Window  Server 2008,IIS7,而我使用的是IIS6作为ftp站点，这是失败根源。</p>

+ 我想到的方法就是通过程序条用ftp功能进行文件的上传，所以又要开始搭建自己失败了n次的ftp站点了(n>3)，今天发现了原因按照 iis6.0搭建了一个ftp站点

> 第一步：windows组件的安装，这里省略

> 第二步

1.建立FTP站点的主目录：随便在哪个盘都可以，当然最好不要放在C盘       ，原因不要我说了吧！这次我就选E盘了，我在E盘下建个ftpsite文
件夹来做这次实验FTP的主目录，如图1。
<img src="http://down.chinaz.com/upload/2011/3/29/2011032950773205.png"/>

2.建好站点的主目录后，在站点的主目录下建Localuser文件夹，这个文件夹要来存放用户的主目录和匿名访问目录。又要注意，只能要这个文件夹，不能要其他的，这是微软规定的，发脾气找微软去，或者自己开发个系统出来，那中国也跟着发达了。如图2

<img src="http://down.chinaz.com/upload/2011/3/29/2011032950783829.png"/>

3.建好Localuser文件夹后，接下来在Localuser下面就要建用户的主目录文件夹还有匿名访问文件夹。注意用户的主目录文件夹必须和用户的登录名一一对应，匿名访问文件夹必须是Public，否则无效。这里要解释下，匿名访问文件夹就是站点配置允许匿名访问的情况下，匿名用户所登录到的文件夹，该文件夹里的内容是对匿名用户是开放的。这次分别建一个用户主目录文件夹hk123和匿名访问文件夹Public。如图3和4

<img src="http://down.chinaz.com/upload/2011/3/29/2011032950794361.png"/>
<img src="http://down.chinaz.com/upload/2011/3/29/2011032950801189.png"/>
> 第三步

4.进入ftp站点右键单击”FTP站点“出现新建站点菜单，选择选择新建”
5.按照正常流程，进入

<img src="http://down.chinaz.com/upload/2011/3/29/2011032950912345.png"/>
6.在选择之前建立的文件夹
7.权限选择 读取，写入
8.FTP站点建完了，账户还没建，差点忘了-_- 。现在建，要注意账户要和主目录一一对应.

进入命令行

cd \
net user hh123  lova-=123 /add
9.验证看能不能访问。先用匿名访问，配置网站允许匿名访问，如图

<img src="http://down.chinaz.com/upload/2011/3/29/2011032950956909.png"/>

<img src="http://down.chinaz.com/upload/2011/3/29/2011032950965093.png"/>

10.要用户名访问看能否成功，先配置站点禁止匿名访问 如图

<img src="http://down.chinaz.com/upload/2011/3/29/2011032950979813.png">

<p style="color:red">这后这里说一下，是否允许匿名访问，匿名分文的是 public文件夹，禁止匿名访问的是自己的用户名文件夹</p>
